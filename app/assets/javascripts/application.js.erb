//= require jquery-2.1.1.min
//= require jquery-ujs-1.0.0
//= require moment-2.7.0.min
//= require lodash-2.4.1.min
//= require jstimezonedetect-1.0.5.min
//= require angular-1.3.0-beta.min
//= require angular-route-1.3.0-beta.min

//= require bootstrap-sprockets-3.2.0
//= require bootstrap-datepicker-1.3.0

//= require ./configs/angular
//= require ./configs/rails
//= require ./configs/lodash
//= require ./configs/datepicker

//= require ./directives/navigation
//= require ./directives/form

//= require ./controllers/expenses
//= require ./controllers/tests

//= require_self

(function() {
  "use strict";

  var app = angular.module('application');

  app.config(['$routeProvider', function($routeProvider) {
    $routeProvider.
      when('/expenses', {
        templateUrl: '<%= asset_path('expenses/index.html') %>',
        controller: 'ExpensesController'
      }).
      when('/tests', {
        templateUrl: '<%= asset_path('tests/index.html') %>',
        controller: 'TestsController'
      }).
      when('/tests/:id', {
        templateUrl: '<%= asset_path('tests/show.html') %>',
        controller: 'TestsController'
      }).
      otherwise({
        redirectTo: '/expenses'
      });
    }]);

  app.run(['$rootScope', '$location', function($rootScope, $location) {
    $rootScope.
      $on('$routeChangeStart', function(event, next, current) {
        // prevents bootstrap-datetimepicker from leaving unwanted dropdown menus lying around.
        $('body > div.bootstrap-datetimepicker-widget.dropdown-menu').remove();
      });
  }]);
})();
