/* global angular */

(function() {
  "use strict";

  var mod = angular.module('directives');

  mod.directive('myFormInput', function() {
    return {
      restrict: 'E',

      scope: true,
      replace: true,
      transclude: true,

      templateUrl: '<%= asset_path('directives/form/input.html') %>',

      link: function ($scope, element, attrs, ctrl, transclude) {
        $scope.attrs = {
          label: attrs.label,
          icon: attrs.icon
        };

        element.find('input[transclude]').replaceWith(
          transclude().attr('id', 'input-' + $scope.$id).addClass('form-control')
        );
      }
    };
  });

  mod.directive('myFormButton', function() {
    return {
      restrict: 'C',

      scope: true,

      templateUrl: '<%= asset_path('directives/form/button.html') %>',

      link: function ($scope, element, attrs, ctrl, transclude) {
        element.addClass("btn").addClass('btn-' + (attrs.color || 'default'));

        $scope.attrs = {
          label: attrs.label,
          icon: attrs.icon
        };
      }
    };
  });

  mod.directive('myDatetimePicker', function() {
    return {
      restrict: 'C',

      scope: true,

      link: function(_$scope, element, attrs) {
        element.datetimepicker();
      }
    }
  });
})();
